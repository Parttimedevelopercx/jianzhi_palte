"use strict";(self["webpackChunkAPITestPlateform"]=self["webpackChunkAPITestPlateform"]||[]).push([[290],{9290:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var r=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.projectForm}},[t("el-form-item",{attrs:{label:""}},[t("el-input",{staticClass:"project_input",attrs:{placeholder:"输入需求名称搜索"},model:{value:e.projectForm.project_name,callback:function(t){e.$set(e.projectForm,"project_name",t)},expression:"projectForm.project_name"}})],1),t("el-form-item",[t("el-button",{staticClass:"project_search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),t("el-form-item",[t("el-button",{staticClass:"project_refresh",attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.handleRefresh}},[e._v("刷新")])],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize)}},[t("el-table-column",{attrs:{prop:"jz_order_num",label:"订单编号",width:"200"}}),t("el-table-column",{attrs:{prop:"project_name",label:"需求名称",width:"300"}}),t("el-table-column",{attrs:{prop:"description",label:"需求描述",width:"500"}}),t("el-table-column",{attrs:{prop:"cycle_requiremente",label:"周期要求",width:"80"}}),t("el-table-column",{attrs:{prop:"technical_requiremente",label:"技术要求",width:"200"}}),t("el-table-column",{attrs:{prop:"creat_time",label:"发布时间",width:"120"}}),t("el-table-column",{attrs:{prop:"budget",label:"预算",width:"100"}}),t("el-table-column",{attrs:{label:"操作栏",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"danger"},on:{click:function(t){return t.stopPropagation(),e.handelSure(a.row)}}},[e._v("接单")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.currentPage,background:"","page-sizes":[20,30,50],"page-size":e.pagesize,layout:"total, sizes,  prev, pager, next, jumper",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],o=(a(7658),a(4775)),l={name:"Project",data(){return{tableData:[],isAdd:!0,currentId:null,dialogFormVisible:!1,projectForm:{project_name:""},projectInFo:{project_name:"",description:"",cycle_requiremente:"",technical_requiremente:"",budget:""},formLabelWidth:"120px",totalCount:0,currentPage:1,pagesize:20}},created(){this.loadProjectInfo()},methods:{async loadProjectInfo(){try{const{data:e}=await(0,o.ku)();this.tableData=e.data,this.totalCount=e.total_count}catch(e){"未登录"===e.message||this.$message.success("登录失效，请重新登陆"),this.$router.push("/login")}},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},async handleSearch(){const e={project_name:this.projectForm.project_name,type:"pname"},{data:t}=await(0,o.g7)(e);"0"===t.code&&(this.tableData=t.data,this.projectForm.project_name="")},handleRefresh(){this.loadProjectInfo(),this.projectForm.project_name=""},handelSure(e){this.$confirm("请仔细阅读需求，接单后需在规定时间内完成任务，是否确认接单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const{data:t}=await(0,o.iZ)({jz_order_num:e.jz_order_num,xq_name:e.project_name,description:e.description,cycle_requiremente:e.cycle_requiremente,technical_requiremente:e.technical_requiremente,creat_time:e.creat_time,budget:e.budget,order_owner:localStorage.username});"0"===t.code&&(this.$message.success("接单成功，请到我的订单查看；"),this.loadProjectInfo())})).catch((()=>{this.$message({type:"info",message:"已取消"})}))}}},c=l,i=a(1001),s=(0,i.Z)(c,r,n,!1,null,"354be0e4",null),u=s.exports},4775:function(e,t,a){a.d(t,{Qo:function(){return i},ZA:function(){return o},bH:function(){return l},g7:function(){return c},iZ:function(){return s},ku:function(){return n}});var r=a(2218);const n=()=>(0,r.Z)({method:"GET",url:"plan",params:{type:"plist"}}),o=e=>(0,r.Z)({method:"POST",url:"plan",data:e}),l=e=>(0,r.Z)({method:"PUT",url:"plan",data:e}),c=e=>(0,r.Z)({method:"GET",url:"plan",params:{...e}}),i=e=>(0,r.Z)({method:"DELETE",url:"plan",data:e}),s=e=>(0,r.Z)({method:"POST",url:"student",data:e})}}]);
//# sourceMappingURL=290.f8b45831.js.map