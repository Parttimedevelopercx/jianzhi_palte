"use strict";(self["webpackChunkAPITestPlateform"]=self["webpackChunkAPITestPlateform"]||[]).push([[606],{5606:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user"},[t("div",{staticClass:"user-header"},[t("el-button",{staticStyle:{float:"left","font-size":"14px"},attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("新增用户")]),t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.userForm}},[t("el-form-item",{attrs:{label:""}},[t("el-input",{staticClass:"user_input",attrs:{placeholder:"输入用户名"},model:{value:e.userForm.user_name,callback:function(t){e.$set(e.userForm,"user_name",t)},expression:"userForm.user_name"}})],1),t("el-form-item",[t("el-button",{staticClass:"user_search",staticStyle:{"font-size":"14px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),t("el-button",{staticClass:"user_refresh",staticStyle:{"font-size":"14px"},attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.handleRefresh}},[e._v("刷新")])],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{prop:"id",label:"编号",width:"100"}}),t("el-table-column",{attrs:{prop:"user_name",label:"用户名",width:"200"}}),t("el-table-column",{attrs:{prop:"password",label:"密码",width:"200"}}),t("el-table-column",{attrs:{prop:"nick_name",label:"昵称",width:"150"}}),t("el-table-column",{attrs:{prop:"role",label:"角色",width:"200"}}),t("el-table-column",{attrs:{prop:"creat_time",label:"创建时间",width:"200"}}),t("el-table-column",{attrs:{prop:"status",label:"状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"1","inactive-value":"0",disabled:""},model:{value:s.row.status,callback:function(t){e.$set(s.row,"status",t)},expression:"scope.row.status"}})]}}])}),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"warning"},on:{click:function(t){return t.stopPropagation(),e.handleEdit(s.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger"},on:{click:function(t){return t.stopPropagation(),e.handleDel(s.row)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{attrs:{title:"用户信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{model:e.userInFo}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.userInFo.user_name,callback:function(t){e.$set(e.userInFo,"user_name",t)},expression:"userInFo.user_name"}})],1),t("el-form-item",{attrs:{label:"昵称"}},[t("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.userInFo.nick_name,callback:function(t){e.$set(e.userInFo,"nick_name",t)},expression:"userInFo.nick_name"}})],1),t("el-form-item",{attrs:{label:"角色"}},[t("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.userInFo.role,callback:function(t){e.$set(e.userInFo,"role",t)},expression:"userInFo.role"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e.isAdd?t("el-button",{attrs:{type:"primary"},on:{click:e.processAdd}},[e._v("确 定")]):e._e(),e.isAdd?e._e():t("el-button",{attrs:{type:"primary"},on:{click:e.processEdit}},[e._v("编 辑")])],1)],1),t("el-pagination",{attrs:{"current-page":e.userForm.currentPage,"page-sizes":[20,30,40,50],"page-size":e.userForm.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],n=(s(7658),s(3099)),o={name:"user",data(){return{userForm:{user_name:"",status:"",pageSize:20,currentPage:1},tableData:[{id:"",user_name:"",password:"",nick_name:"",role:"",creat_time:"",status:""}],userInFo:{user_name:"",password:"",nick_name:"",role:""},dialogFormVisible:!1,multipleSelection:[],multipleSelections:[],currentId:null,isAdd:!0,totalCount:0}},created(){this.loadUserList()},methods:{async loadUserList(){const e={type:"ulist",page:1,size:20};try{const{data:t}=await n.Z.getUserList(e);"0"===t.code&&(this.tableData=t.data,this.totalCount=t.total_count)}catch(t){"未登录"===t.message||this.$message.success("登陆失效，请重新登陆"),this.$router.push("/login")}},async handleSearch(){const e={user_name:this.userForm.user_name,type:"uname",token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiYWRtaW4iLCJleHAiOjE2OTE4MTE2NzZ9.-iAgMZX31ZcLpvHN0IRlO_6u90Gj34eKekyfXGXkuQA"},{data:t}=await n.Z.getUserSearch(e);"0"===t.code&&(this.tableData=t.data,this.userForm.user_name="")},handleAdd(){this.isAdd=!0,this.dialogFormVisible=!0},async processAdd(){const e={user_name:this.userInFo.user_name,nick_name:this.userInFo.nick_name,role:this.userInFo.role},{data:t}=await n.Z.UserAdd(e);"0"===t.code&&(this.$message.success("添加成功"),this.dialogFormVisible=!1,this.loadUserList(),this.userInFo={user_name:"",nick_name:"",role:""})},handleEdit(e){this.currentId=e.id,this.isAdd=!1,this.dialogFormVisible=!0,this.userInFo.user_name=e.user_name,this.userInFo.password=e.password,this.userInFo.nick_name=e.nick_name,this.userInFo.role=e.role},async processEdit(){const e={id:this.currentId,user_name:this.userInFo.user_name,password:this.userInFo.password,nick_name:this.userInFo.nick_name,role:this.userInFo.role},{data:t}=await n.Z.UserEdit(e);"0"===t.code&&(this.$message.success("编辑成功"),this.dialogFormVisible=!1,this.loadUserList(),this.userInFo={user_name:"",password:"",nick_name:"",role:""})},handleDel(e){this.$confirm("删除用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const t={id:e.id},{data:s}=await n.Z.UserDel(t);"0"===s.code&&(this.loadUserList(),this.$message.success("删除成功"))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},handleRefresh(){this.loadUserList(),this.userForm.user_name=""},handleSizeChange(e){this.userForm.pageSize=e,this.loadUserList()},handleCurrentChange(e){this.userForm.currentPage=e,this.loadUserList()}}},i=o,l=s(1001),u=(0,l.Z)(i,a,r,!1,null,"d3b3752c",null),c=u.exports},3099:function(e,t,s){var a=s(2218);const r=async e=>{const t=await(0,a.Z)({method:"POST",url:"login",data:{...e}});return t},n=async e=>{const t=await(0,a.Z)({method:"GET",url:"user",params:{type:"uname",user_name:e}});return t},o=async e=>{const t=await(0,a.Z)({method:"GET",url:"user",params:{...e}});return t},i=async e=>{const t=await(0,a.Z)({method:"GET",url:"user",params:{...e}});return t},l=async e=>{const t=await(0,a.Z)({method:"POST",url:"user",data:e});return t},u=async e=>{const t=await(0,a.Z)({method:"PUT",url:"user",data:e});return t},c=async e=>{const t=await(0,a.Z)({method:"DELETE",url:"user",data:e});return t};t.Z={login:r,getUserInfo:n,getUserList:o,getUserSearch:i,UserAdd:l,UserEdit:u,UserDel:c}}}]);
//# sourceMappingURL=606.eb499920.js.map