"use strict";(self["webpackChunkAPITestPlateform"]=self["webpackChunkAPITestPlateform"]||[]).push([[561],{4561:function(e,t,o){o.r(t),o.d(t,{default:function(){return p}});var r=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("新增订单")]),t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.projectForm}},[t("el-form-item",{attrs:{label:""}},[t("el-input",{staticClass:"project_input",attrs:{placeholder:"输入需求名称搜索"},model:{value:e.projectForm.project_name,callback:function(t){e.$set(e.projectForm,"project_name",t)},expression:"projectForm.project_name"}})],1),t("el-form-item",[t("el-button",{staticClass:"project_search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),t("el-form-item",[t("el-button",{staticClass:"project_refresh",attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.handleRefresh}},[e._v("刷新")])],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize)}},[t("el-table-column",{attrs:{prop:"jz_order_num",label:"订单编号",width:"200"}}),t("el-table-column",{attrs:{prop:"project_name",label:"需求名称",width:"200"}}),t("el-table-column",{attrs:{prop:"description",label:"需求描述",width:"500"}}),t("el-table-column",{attrs:{prop:"cycle_requiremente",label:"周期要求",width:"80"}}),t("el-table-column",{attrs:{prop:"technical_requiremente",label:"技术要求",width:"200"}}),t("el-table-column",{attrs:{prop:"creat_time",label:"发布时间",width:"120"}}),t("el-table-column",{attrs:{prop:"budget",label:"预算",width:"120"}}),t("el-table-column",{attrs:{label:"操作栏",width:"200"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{type:"warning"},on:{click:function(t){return t.stopPropagation(),e.handleEdit(o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger"},on:{click:function(t){return t.stopPropagation(),e.handelDel(o.row)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{attrs:{title:"项目信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{model:e.projectInFo}},[t("el-form-item",{attrs:{label:"需求名称","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.projectInFo.project_name,callback:function(t){e.$set(e.projectInFo,"project_name",t)},expression:"projectInFo.project_name"}})],1),t("el-form-item",{attrs:{label:"需求详细描述","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.projectInFo.description,callback:function(t){e.$set(e.projectInFo,"description",t)},expression:"projectInFo.description"}})],1),t("el-form-item",{attrs:{label:"周期要求","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.projectInFo.cycle_requiremente,callback:function(t){e.$set(e.projectInFo,"cycle_requiremente",t)},expression:"projectInFo.cycle_requiremente"}})],1),t("el-form-item",{attrs:{label:"技术要求","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.projectInFo.technical_requiremente,callback:function(t){e.$set(e.projectInFo,"technical_requiremente",t)},expression:"projectInFo.technical_requiremente"}})],1),t("el-form-item",{attrs:{label:"预算","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.projectInFo.budget,callback:function(t){e.$set(e.projectInFo,"budget",t)},expression:"projectInFo.budget"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e.isAdd?t("el-button",{attrs:{type:"primary"},on:{click:e.processAdd}},[e._v("新增")]):e._e(),e.isAdd?e._e():t("el-button",{attrs:{type:"primary"},on:{click:e.processEdit}},[e._v("编辑")])],1)],1),t("el-pagination",{attrs:{"current-page":e.currentPage,background:"","page-sizes":[20,30,50],"page-size":e.pagesize,layout:"total, sizes,  prev, pager, next, jumper",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},a=[],n=(o(7658),o(4775)),i={name:"Project",data(){return{tableData:[],isAdd:!0,currentId:null,dialogFormVisible:!1,projectForm:{project_name:""},projectInFo:{project_name:"",description:"",cycle_requiremente:"",technical_requiremente:"",budget:""},formLabelWidth:"120px",totalCount:0,currentPage:1,pagesize:20}},created(){this.loadProjectInfo()},methods:{handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},async loadProjectInfo(){try{const{data:e}=await(0,n.ku)();this.tableData=e.data,this.totalCount=e.total_count}catch(e){"未登录"===e.message||this.$message.success("登录失效，请重新登陆"),this.$router.push("/login")}},handleAdd(){this.dialogFormVisible=!0,this.isAdd=!0},async processAdd(){const e={project_name:this.projectInFo.project_name,description:this.projectInFo.description,cycle_requiremente:this.projectInFo.cycle_requiremente,technical_requiremente:this.projectInFo.technical_requiremente,budget:this.projectInFo.budget},{data:t}=await(0,n.ZA)(e);"0"===t.code&&(this.$message.success("添加成功"),this.dialogFormVisible=!1,this.loadProjectInfo(),this.projectInFo={project_name:"",description:"",cycle_requiremente:"",technical_requiremente:"",budget:"",type:null})},handelDel(e){this.$confirm("删除兼职, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const{data:t}=await(0,n.Qo)({id:e.id});"0"===t.code&&(this.$message.success("删除成功"),this.loadProjectInfo())})).catch((()=>{this.$message({type:"info",message:"已取消"})}))},handleEdit(e){this.currentId=e.jz_order_num,this.isAdd=!1,this.dialogFormVisible=!0,this.projectInFo.project_name=e.project_name,this.projectInFo.description=e.description,this.projectInFo.cycle_requiremente=e.cycle_requiremente,this.projectInFo.technical_requiremente=e.technical_requiremente,this.projectInFo.budget=e.budget},async processEdit(){const e={id:this.currentId,project_name:this.projectInFo.project_name,description:this.projectInFo.description,cycle_requiremente:this.projectInFo.cycle_requiremente,technical_requiremente:this.projectInFo.technical_requiremente,budget:this.projectInFo.budget},{data:t}=await(0,n.bH)(e);"0"===t.code&&(this.$message.success("修改成功"),this.dialogFormVisible=!1,this.projectInFo={project_name:"",description:"",cycle_requiremente:"",technical_requiremente:"",budget:"",type:null},this.loadProjectInfo())},async handleSearch(){const e={project_name:this.projectForm.project_name,type:"pname"},{data:t}=await(0,n.g7)(e);"0"===t.code&&(this.tableData=t.data,this.projectForm.project_name="")},handleRefresh(){this.projectForm.project_name="",this.loadProjectInfo()}}},c=i,l=o(1001),s=(0,l.Z)(c,r,a,!1,null,"5afdebb8",null),p=s.exports},4775:function(e,t,o){o.d(t,{Qo:function(){return l},ZA:function(){return n},bH:function(){return i},g7:function(){return c},iZ:function(){return s},ku:function(){return a}});var r=o(2218);const a=()=>(0,r.Z)({method:"GET",url:"plan",params:{type:"plist"}}),n=e=>(0,r.Z)({method:"POST",url:"plan",data:e}),i=e=>(0,r.Z)({method:"PUT",url:"plan",data:e}),c=e=>(0,r.Z)({method:"GET",url:"plan",params:{...e}}),l=e=>(0,r.Z)({method:"DELETE",url:"plan",data:e}),s=e=>(0,r.Z)({method:"POST",url:"student",data:e})}}]);
//# sourceMappingURL=561.15a95f0d.js.map